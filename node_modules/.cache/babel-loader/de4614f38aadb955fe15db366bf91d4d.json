{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yogesh\\\\Desktop\\\\acomgit\\\\ecomgit\\\\ecommerce\\\\src\\\\pages\\\\wishlist.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from \"react\";\nimport { useAuth } from \"../contexts/auth-context\";\nimport axios from \"axios\";\nimport { useWishlistcontext } from \"../contexts/wishlist-context\";\nimport { useCartcontext } from \"../contexts/cart-context\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Wishlistpage() {\n  _s();\n\n  // const [state, setState] = useState([]);\n  const {\n    token,\n    myauthAxios\n  } = useAuth();\n  const {\n    wishliststate,\n    wishlistdispatch\n  } = useWishlistcontext();\n  const {\n    cartstate,\n    cartdispatch\n  } = useCartcontext();\n  const wishliststatearray = [...wishliststate.datainwishlist];\n  useEffect(() => {\n    // wishlisttoken :\n    const source = axios.CancelToken.source();\n\n    const fetchData = async () => {\n      try {\n        console.log({\n          wishlisttoken: token\n        });\n        const response = await axios.get(\"https://ecom-server--bleedblue.repl.co/wishlist/getwhishlistdata\", {\n          headers: {\n            authorization: token\n          },\n          cancelToken: source.token\n        }); // console.log(response.data.data.productsinwishlist);\n\n        wishlistdispatch({\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\n          payload: response.data.data.productsinwishlist\n        }); // ...\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          //cancelled\n          console.log(\"axios cancel : \", JSON.stringify(axios.isCancel(error)));\n        } else {\n          // throw error;\n          console.log({\n            success: false,\n            errormessage: error.message\n          });\n        }\n      }\n    };\n\n    fetchData();\n    return () => {\n      source.cancel();\n    };\n  }, [token, wishlistdispatch]);\n  console.log({\n    wishlist: wishliststatearray\n  }); // WHISHLIST_TO_CART\n\n  async function removefromwishlist(item) {\n    // /wishlist/removefromwhishlist\n    console.log({\n      message: \"REMOVE_FROM_WHISHLIST\",\n      object: { ...item\n      }\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/wishlist/removefromwhishlist\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"removed from wishlist\",\n          response: response.data.removefromwhishlistupdate.productsinwishlist\n        }); // response.data.removefromwhishlistupdate.productsinwishlist\n\n        wishlistdispatch({\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\n          payload: response.data.removefromwhishlistupdate.productsinwishlist\n        });\n        toast.success(\"removed from wishlist\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n        console.log({\n          response: response\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log(\"product doesn't axist\");\n      }\n    } catch (error) {\n      toast.error(\"some error occured\", {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n    }\n  }\n\n  async function wishlisttocart(item) {\n    console.log({\n      message: \"WHISHLIST_TO_CART\",\n      object: { ...item\n      }\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/cart/addtocart\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"product added to cart\",\n          response: response.data.updatedcart\n        });\n        cartdispatch({\n          type: \"SET_DATA_TO_ARRAY\",\n          payload: response.data.updatedcart\n        });\n        toast.success(\"added to cart\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log(\"product alreafy axist\");\n      }\n    } catch (error) {\n      // console.log({\n      //   success: false,\n      //   errormessage: error.message,\n      //   errorresponse: error.response.data.message,\n      //   status: error.response.status,\n      // });\n      if (error.response.data.message === \"product already present in cart\" && error.response.status === 400) {\n        console.log(\"product already present in cart\");\n        toast.info(\"product already present in wishlist\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      } else {\n        toast.error(\"some error occured\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n    }\n  } // item\n\n\n  console.log({\n    cartstate\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"This is Wishlist page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-cardcontainer\",\n      children: wishliststatearray.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-badge\",\n              children: \"Hot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-tumb\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: item.image,\n                alt: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-catagory\",\n                children: item.foodtype\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-header\",\n                children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [item.description.substring(0, 40), \"...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-bottom-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"product-price\",\n                  children: [\"\\u20B9\", item.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"product-links\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      // REMOVE_FROM_WHISHLIST\n                      removefromwishlist(item); // console.log({ message: \"REMOVE_FROM_WHISHLIST\" });\n                      // dispatch({\n                      //   type: \"REMOVE_FROM_WHISHLIST\",\n                      //   payload: items,\n                      // })\n                    },\n                    className: \"product-whishlist-heart\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: \"2rem\"\n                      },\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    // WHISHLIST_TO_CART\n                    onClick: () => {\n                      wishlisttocart(item); // dispatch({\n                      //   type: \"WHISHLIST_TO_CART\",\n                      //   payload: items,\n                      // });\n                    },\n                    className: \"product-whishlist-cart\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: \"2rem\"\n                      },\n                      children: \"+\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 196,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this)\n        }, item.prid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Wishlistpage, \"epYQaa9qazr7bDb8npBIYGPCsIE=\", false, function () {\n  return [useAuth, useWishlistcontext, useCartcontext];\n});\n\n_c = Wishlistpage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Wishlistpage\");","map":{"version":3,"sources":["C:/Users/Yogesh/Desktop/acomgit/ecomgit/ecommerce/src/pages/wishlist.js"],"names":["useEffect","useAuth","axios","useWishlistcontext","useCartcontext","ToastContainer","toast","Wishlistpage","token","myauthAxios","wishliststate","wishlistdispatch","cartstate","cartdispatch","wishliststatearray","datainwishlist","source","CancelToken","fetchData","console","log","wishlisttoken","response","get","headers","authorization","cancelToken","type","payload","data","productsinwishlist","error","isCancel","JSON","stringify","success","errormessage","message","cancel","wishlist","removefromwishlist","item","object","post","status","removefromwhishlistupdate","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","wishlisttocart","updatedcart","info","map","image","name","foodtype","description","substring","price","fontSize","prid"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\r\nimport { useAuth } from \"../contexts/auth-context\";\r\nimport axios from \"axios\";\r\nimport { useWishlistcontext } from \"../contexts/wishlist-context\";\r\nimport { useCartcontext } from \"../contexts/cart-context\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport function Wishlistpage() {\r\n  // const [state, setState] = useState([]);\r\n  const { token, myauthAxios } = useAuth();\r\n  const { wishliststate, wishlistdispatch } = useWishlistcontext();\r\n  const { cartstate, cartdispatch } = useCartcontext();\r\n  const wishliststatearray = [...wishliststate.datainwishlist];\r\n  useEffect(() => {\r\n    // wishlisttoken :\r\n\r\n    const source = axios.CancelToken.source();\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        console.log({ wishlisttoken: token });\r\n        const response = await axios.get(\r\n          \"https://ecom-server--bleedblue.repl.co/wishlist/getwhishlistdata\",\r\n          {\r\n            headers: { authorization: token },\r\n            cancelToken: source.token,\r\n          }\r\n        );\r\n        // console.log(response.data.data.productsinwishlist);\r\n        wishlistdispatch({\r\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\r\n          payload: response.data.data.productsinwishlist,\r\n        });\r\n        // ...\r\n      } catch (error) {\r\n        if (axios.isCancel(error)) {\r\n          //cancelled\r\n          console.log(\"axios cancel : \", JSON.stringify(axios.isCancel(error)));\r\n        } else {\r\n          // throw error;\r\n          console.log({ success: false, errormessage: error.message });\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      source.cancel();\r\n    };\r\n  }, [token, wishlistdispatch]);\r\n  console.log({ wishlist: wishliststatearray });\r\n  // WHISHLIST_TO_CART\r\n  async function removefromwishlist(item) {\r\n    // /wishlist/removefromwhishlist\r\n    console.log({ message: \"REMOVE_FROM_WHISHLIST\", object: { ...item } });\r\n    try {\r\n      const response = await myauthAxios.post(\"/wishlist/removefromwhishlist\", {\r\n        ...item,\r\n      });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"removed from wishlist\",\r\n          response: response.data.removefromwhishlistupdate.productsinwishlist,\r\n        });\r\n        // response.data.removefromwhishlistupdate.productsinwishlist\r\n        wishlistdispatch({\r\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\r\n          payload: response.data.removefromwhishlistupdate.productsinwishlist,\r\n        });\r\n        toast.success(\"removed from wishlist\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n        console.log({ response: response });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log(\"product doesn't axist\");\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"some error occured\", {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    }\r\n  }\r\n  async function wishlisttocart(item) {\r\n    console.log({ message: \"WHISHLIST_TO_CART\", object: { ...item } });\r\n    try {\r\n      const response = await myauthAxios.post(\"/cart/addtocart\", { ...item });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"product added to cart\",\r\n          response: response.data.updatedcart,\r\n        });\r\n        cartdispatch({\r\n          type: \"SET_DATA_TO_ARRAY\",\r\n          payload: response.data.updatedcart,\r\n        });\r\n        toast.success(\"added to cart\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log(\"product alreafy axist\");\r\n      }\r\n    } catch (error) {\r\n      // console.log({\r\n      //   success: false,\r\n      //   errormessage: error.message,\r\n      //   errorresponse: error.response.data.message,\r\n      //   status: error.response.status,\r\n      // });\r\n      if (\r\n        error.response.data.message === \"product already present in cart\" &&\r\n        error.response.status === 400\r\n      ) {\r\n        console.log(\"product already present in cart\");\r\n        toast.info(\"product already present in wishlist\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      } else {\r\n        toast.error(\"some error occured\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n    }\r\n  }\r\n  // item\r\n  console.log({ cartstate });\r\n  return (\r\n    <div>\r\n      <h1>This is Wishlist page</h1>\r\n      <div className=\"product-cardcontainer\">\r\n        {wishliststatearray.map((item) => {\r\n          return (\r\n            <div key={item.prid}>\r\n              <div className=\"product-card\">\r\n                <div className=\"product-badge\">Hot</div>\r\n                <div className=\"product-tumb\">\r\n                  <img src={item.image} alt={item.name} />\r\n                </div>\r\n                <div className=\"product-details\">\r\n                  <span className=\"product-catagory\">{item.foodtype}</span>\r\n                  <span className=\"product-header\">\r\n                    {/* <Link to={`/productviewpage/${item.id}`}> */}\r\n                    <h2>{item.name}</h2>\r\n                  </span>\r\n                  <p>{item.description.substring(0, 40)}...</p>\r\n                  <div className=\"product-bottom-details\">\r\n                    <div className=\"product-price\">&#8377;{item.price}</div>\r\n                    <div className=\"product-links\">\r\n                      <button\r\n                        onClick={() => {\r\n                          // REMOVE_FROM_WHISHLIST\r\n                          removefromwishlist(item);\r\n                          // console.log({ message: \"REMOVE_FROM_WHISHLIST\" });\r\n                          // dispatch({\r\n                          //   type: \"REMOVE_FROM_WHISHLIST\",\r\n                          //   payload: items,\r\n                          // })\r\n                        }}\r\n                        className=\"product-whishlist-heart\"\r\n                      >\r\n                        <span style={{ fontSize: \"2rem\" }}>&#215;</span>\r\n                      </button>\r\n                      <button\r\n                        // WHISHLIST_TO_CART\r\n                        onClick={() => {\r\n                          wishlisttocart(item);\r\n\r\n                          // dispatch({\r\n                          //   type: \"WHISHLIST_TO_CART\",\r\n                          //   payload: items,\r\n                          // });\r\n                        }}\r\n                        className=\"product-whishlist-cart\"\r\n                      >\r\n                        <span style={{ fontSize: \"2rem\" }}>+</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}