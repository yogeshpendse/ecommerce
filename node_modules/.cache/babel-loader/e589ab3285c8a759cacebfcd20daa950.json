{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yogesh\\\\Desktop\\\\acomgit\\\\ecomgit\\\\ecommerce\\\\src\\\\components\\\\productdata.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/auth-context\";\nimport { useCartcontext } from \"../contexts/cart-context\";\nimport { useProductcontext } from \"../contexts/product-context\";\nimport { useWishlistcontext } from \"../contexts/wishlist-context\";\nimport { applydishtype, applytimed, applynewdish, applysort, applyfooddishtype, retunsearch } from \"../functions/productfunctions\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Productdata(params) {\n  _s();\n\n  const {\n    productsstate,\n    setProductsstate\n  } = params;\n  const {\n    token,\n    cartdispatch\n  } = useCartcontext();\n  const {\n    wishlistdispatch\n  } = useWishlistcontext();\n  const {\n    myauthAxios\n  } = useAuth();\n  const {\n    state,\n    setState,\n    productstate\n  } = useProductcontext();\n  const arrayone = applydishtype(productstate.dishtype, state);\n  const arraytwo = applytimed(productstate.timed, arrayone);\n  const arraythree = applynewdish(productstate.newdish, arraytwo);\n  const arrayfour = applysort(productstate.sort, arraythree);\n  const arrayfive = applyfooddishtype(productstate.fooddishtype, arrayfour);\n  const arraysix = retunsearch(productstate.searchtext, arrayfive);\n  useEffect(() => {\n    const source = axios.CancelToken.source();\n\n    const fetchData = async () => {\n      try {\n        setProductsstate(true);\n        console.log({\n          token\n        });\n        const response = await axios.get(\"https://ecom-server--bleedblue.repl.co/product/getdata\", {\n          headers: {\n            authorization: token\n          },\n          cancelToken: source.token\n        });\n        const productdata = response.data.data;\n        setState(productdata);\n        setProductsstate(false);\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          //cancelled\n          setProductsstate(false);\n          console.log(\"axios cancel : \", JSON.stringify(axios.isCancel(error)));\n        } else {\n          console.log({\n            success: false,\n            errormessage: error.message\n          });\n        }\n      }\n    };\n\n    fetchData();\n    return () => {\n      source.cancel();\n    };\n  }, [token, setState, setProductsstate]);\n\n  async function handlecartbutton(item) {\n    console.log({ ...item\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/cart/addtocart\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"added to cart\",\n          response: response.data.updatedcart\n        });\n        cartdispatch({\n          type: \"SET_DATA_TO_ARRAY\",\n          payload: response.data.updatedcart\n        });\n        toast.success(\"added to cart\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log({\n          message: \"already exist\"\n        });\n      }\n    } catch (error) {\n      console.log({\n        success: false,\n        errormessage: error.message\n      });\n\n      if (error.response.data.message === \"product already present in cart\" && error.response.status === 400) {\n        toast.info(\"product already present in cart\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      } else {\n        toast.error(\"some error occured\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n    } // const prodexistance = checkifelementexist(cartstate.dataincart, item);\n    // console.log({\n    //   prodexistance,\n    //   cartlistitem: item,\n    //   cartaarray: cartstate.dataincart,\n    // });\n\n  }\n\n  async function handlewishlistbutton(item) {\n    // wishlistdispatch({ type: \"RETURN_SAME_ARRAY\", payload: item, });\n    console.log({\n      wishlistitem: item\n    });\n    console.log({ ...item\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/wishlist/addtowhishlist\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"added to whishlist\",\n          response: response.data.update.productsinwishlist\n        });\n        wishlistdispatch({\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\n          payload: response.data.update.productsinwishlist\n        });\n        toast.success(\"added to whishlist\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log({\n          message: \"already exist\"\n        });\n      }\n    } catch (error) {\n      console.log({\n        success: false,\n        errormessage: error.message\n      });\n\n      if (error.response.data.message === \"already present in array\" && error.response.status === 400) {\n        console.log(\"already present in wishlist\");\n        toast.info(\"already present in wishlist\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      } else {\n        console.log(\"some error occured\");\n        toast.error(\"some error occured\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [productsstate ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-cardcontainer\",\n      children: arraysix.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-badge\",\n            children: \"Hot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-tumb\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image,\n              alt: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"product-catagory\",\n              children: item.foodtype\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"product-header\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/product/${item.prid}`,\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [item.description, \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.timed && \"Fast Delivery\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.newdish ? \"New Dish\" : \"Old Dish\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.stars\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-bottom-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-price\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: \"green\"\n                  },\n                  children: [\"\\u20B9\", item.price, \" \\xA0\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-links\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  // handlewishlistbutton(item)\n                  onClick: () => handlewishlistbutton(item),\n                  className: \"product-whishlist-heart\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: \"2rem\"\n                    },\n                    children: \" \\u2665 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  // handlecartbutton(item)\n                  onClick: () => handlecartbutton(item),\n                  className: \"product-whishlist-cart\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: \"2rem\"\n                    },\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this)]\n        }, item.prid, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Productdata, \"26hJ7DsguA51CA90XvVTWjXTSw4=\", false, function () {\n  return [useCartcontext, useWishlistcontext, useAuth, useProductcontext];\n});\n\n_c = Productdata;\n\nvar _c;\n\n$RefreshReg$(_c, \"Productdata\");","map":{"version":3,"sources":["C:/Users/Yogesh/Desktop/acomgit/ecomgit/ecommerce/src/components/productdata.js"],"names":["axios","useEffect","Link","useAuth","useCartcontext","useProductcontext","useWishlistcontext","applydishtype","applytimed","applynewdish","applysort","applyfooddishtype","retunsearch","ToastContainer","toast","Productdata","params","productsstate","setProductsstate","token","cartdispatch","wishlistdispatch","myauthAxios","state","setState","productstate","arrayone","dishtype","arraytwo","timed","arraythree","newdish","arrayfour","sort","arrayfive","fooddishtype","arraysix","searchtext","source","CancelToken","fetchData","console","log","response","get","headers","authorization","cancelToken","productdata","data","error","isCancel","JSON","stringify","success","errormessage","message","cancel","handlecartbutton","item","post","status","updatedcart","type","payload","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","info","handlewishlistbutton","wishlistitem","update","productsinwishlist","textAlign","map","image","name","foodtype","prid","description","stars","color","price","fontSize"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../contexts/auth-context\";\r\nimport { useCartcontext } from \"../contexts/cart-context\";\r\nimport { useProductcontext } from \"../contexts/product-context\";\r\nimport { useWishlistcontext } from \"../contexts/wishlist-context\";\r\nimport {\r\n  applydishtype,\r\n  applytimed,\r\n  applynewdish,\r\n  applysort,\r\n  applyfooddishtype,\r\n  retunsearch,\r\n} from \"../functions/productfunctions\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nexport function Productdata(params) {\r\n  const { productsstate, setProductsstate } = params;\r\n  const { token, cartdispatch } = useCartcontext();\r\n  const { wishlistdispatch } = useWishlistcontext();\r\n  const { myauthAxios } = useAuth();\r\n  const { state, setState, productstate } = useProductcontext();\r\n  const arrayone = applydishtype(productstate.dishtype, state);\r\n  const arraytwo = applytimed(productstate.timed, arrayone);\r\n  const arraythree = applynewdish(productstate.newdish, arraytwo);\r\n  const arrayfour = applysort(productstate.sort, arraythree);\r\n  const arrayfive = applyfooddishtype(productstate.fooddishtype, arrayfour);\r\n  const arraysix = retunsearch(productstate.searchtext, arrayfive);\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source();\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        setProductsstate(true);\r\n        console.log({ token });\r\n        const response = await axios.get(\r\n          \"https://ecom-server--bleedblue.repl.co/product/getdata\",\r\n          {\r\n            headers: { authorization: token },\r\n            cancelToken: source.token,\r\n          }\r\n        );\r\n        const productdata = response.data.data;\r\n        setState(productdata);\r\n        setProductsstate(false);\r\n      } catch (error) {\r\n        if (axios.isCancel(error)) {\r\n          //cancelled\r\n          setProductsstate(false);\r\n          console.log(\"axios cancel : \", JSON.stringify(axios.isCancel(error)));\r\n        } else {\r\n          console.log({ success: false, errormessage: error.message });\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      source.cancel();\r\n    };\r\n  }, [token, setState, setProductsstate]);\r\n\r\n  async function handlecartbutton(item) {\r\n    console.log({ ...item });\r\n    try {\r\n      const response = await myauthAxios.post(\"/cart/addtocart\", { ...item });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"added to cart\",\r\n          response: response.data.updatedcart,\r\n        });\r\n        cartdispatch({\r\n          type: \"SET_DATA_TO_ARRAY\",\r\n          payload: response.data.updatedcart,\r\n        });\r\n        toast.success(\"added to cart\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log({ message: \"already exist\" });\r\n      }\r\n    } catch (error) {\r\n      console.log({ success: false, errormessage: error.message });\r\n      if (\r\n        error.response.data.message === \"product already present in cart\" &&\r\n        error.response.status === 400\r\n      ) {\r\n        toast.info(\"product already present in cart\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      } else {\r\n        toast.error(\"some error occured\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n    }\r\n\r\n    // const prodexistance = checkifelementexist(cartstate.dataincart, item);\r\n    // console.log({\r\n    //   prodexistance,\r\n    //   cartlistitem: item,\r\n    //   cartaarray: cartstate.dataincart,\r\n    // });\r\n  }\r\n  async function handlewishlistbutton(item) {\r\n    // wishlistdispatch({ type: \"RETURN_SAME_ARRAY\", payload: item, });\r\n    console.log({ wishlistitem: item });\r\n    console.log({ ...item });\r\n    try {\r\n      const response = await myauthAxios.post(\"/wishlist/addtowhishlist\", {\r\n        ...item,\r\n      });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"added to whishlist\",\r\n          response: response.data.update.productsinwishlist,\r\n        });\r\n        wishlistdispatch({\r\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\r\n          payload: response.data.update.productsinwishlist,\r\n        });\r\n        toast.success(\"added to whishlist\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log({ message: \"already exist\" });\r\n      }\r\n    } catch (error) {\r\n      console.log({ success: false, errormessage: error.message });\r\n      if (\r\n        error.response.data.message === \"already present in array\" &&\r\n        error.response.status === 400\r\n      ) {\r\n        console.log(\"already present in wishlist\");\r\n        toast.info(\"already present in wishlist\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      } else {\r\n        console.log(\"some error occured\");\r\n        toast.error(\"some error occured\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      {productsstate ? (\r\n        <h1 style={{ textAlign: \"center\" }}>Loading...</h1>\r\n      ) : (\r\n        <div className=\"product-cardcontainer\">\r\n          {arraysix.map((item) => {\r\n            return (\r\n              <div className=\"product-card\" key={item.prid}>\r\n                <div className=\"product-badge\">Hot</div>\r\n                <div className=\"product-tumb\">\r\n                  <img src={item.image} alt={item.name} />\r\n                </div>\r\n                <div className=\"product-details\">\r\n                  <span className=\"product-catagory\">{item.foodtype}</span>\r\n                  <span className=\"product-header\">\r\n                    <Link to={`/product/${item.prid}`}>\r\n                      <h3>{item.name}</h3>\r\n                    </Link>\r\n                  </span>\r\n                  <p>{item.description}...</p>\r\n                  <p>{item.timed && \"Fast Delivery\"}</p>\r\n                  <p>{item.newdish ? \"New Dish\" : \"Old Dish\"}</p>\r\n                  <p>{item.stars}</p>\r\n                  <div className=\"product-bottom-details\">\r\n                    <div className=\"product-price\">\r\n                      {/* <small className=\"unhilighted-color\">\r\n                      &#8377;{item.price * item.randommultiplier}\r\n                    </small> */}\r\n                      <span style={{ color: \"green\" }}>\r\n                        &#8377;{item.price} &nbsp;\r\n                      </span>\r\n                      {/* <span style={{ fontSize: \"medium\" }}>\r\n                      {Math.round(100 / item.randommultiplier)}% discount\r\n                    </span> */}\r\n                    </div>\r\n                    <div className=\"product-links\">\r\n                      <button\r\n                        // handlewishlistbutton(item)\r\n                        onClick={() => handlewishlistbutton(item)}\r\n                        className=\"product-whishlist-heart\"\r\n                      >\r\n                        <span style={{ fontSize: \"2rem\" }}> &#9829; </span>\r\n                      </button>\r\n                      <button\r\n                        // handlecartbutton(item)\r\n                        onClick={() => handlecartbutton(item)}\r\n                        className=\"product-whishlist-cart\"\r\n                      >\r\n                        <span style={{ fontSize: \"2rem\" }}>+</span>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}