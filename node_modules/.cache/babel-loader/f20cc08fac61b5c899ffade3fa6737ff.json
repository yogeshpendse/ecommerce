{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Yogesh\\\\Desktop\\\\acomgit\\\\ecomgit\\\\ecommerce\\\\src\\\\pages\\\\cartpage.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth } from \"../contexts/auth-context\";\nimport { useCartcontext } from \"../contexts/cart-context\";\nimport { useWishlistcontext } from \"../contexts/wishlist-context\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function Cartpage() {\n  _s();\n\n  const {\n    token,\n    myauthAxios\n  } = useAuth();\n  const {\n    cartdispatch,\n    cartstate\n  } = useCartcontext();\n  const {\n    wishlistdispatch\n  } = useWishlistcontext();\n  const [loader, setLoader] = useState(true);\n  const state = [...cartstate.dataincart];\n  console.log({\n    state\n  });\n  useEffect(() => {\n    console.log({\n      token\n    });\n    const source = axios.CancelToken.source();\n\n    const fetchData = async () => {\n      try {\n        setLoader(true);\n        const response = await axios.get(\"https://ecom-server--bleedblue.repl.co/cart/getcartdata\", {\n          headers: {\n            authorization: token\n          },\n          cancelToken: source.token\n        });\n        cartdispatch({\n          type: \"SET_DATA_TO_ARRAY\",\n          payload: response.data.data.productsincart\n        });\n        setLoader(false); // ...\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          setLoader(false); //cancelled\n\n          console.log(\"axios cancel : \", JSON.stringify(axios.isCancel(error)));\n        } else {\n          // throw error;\n          console.log({\n            success: false,\n            errormessage: error.message\n          });\n        }\n      }\n    };\n\n    fetchData();\n    return () => {\n      source.cancel();\n    };\n  }, [token, cartdispatch]);\n\n  async function removefromcart(item) {\n    // cartreducer({\n    //   type: \"REMOVE_FROM_CART\",\n    //   payload: response.data.data.productsincart,\n    // });\n    try {\n      const response = await myauthAxios.post(\"/cart/removefromcart\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          success: true,\n          message: \"removed from cart\",\n          response: response.data.data.productsincart\n        });\n        cartdispatch({\n          type: \"SET_DATA_TO_ARRAY\",\n          payload: response.data.data.productsincart\n        });\n        toast.success(\"removed from cart\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n        console.log({\n          message: \"status 200 executed\"\n        });\n      }\n    } catch (error) {\n      console.log({\n        errorresponse: error.response\n      });\n      toast.error(\"some error occured\", {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      });\n    }\n  }\n\n  async function addtowhishlist(item) {\n    console.log({\n      message: \"ADD_TO_WHISHLIST\",\n      data: { ...item\n      }\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/wishlist/addtowhishlist\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"added to whishlist\",\n          response: response.data.update.productsinwishlist\n        });\n        wishlistdispatch({\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\n          payload: response.data.update.productsinwishlist\n        });\n        toast.success(\"added to wishlist\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log({\n          message: \"already exist\"\n        });\n      }\n    } catch (error) {\n      if ((error.response.data.message === \"already present in array\" && error.response.status) === 400) {\n        toast.info(\"product already present in wishlist\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      } else {\n        toast.error(\"some error occured\", {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined\n        });\n      }\n    }\n  }\n\n  async function decrementbyone(item) {\n    console.log({\n      message: \"DECREMENT_BY_ONE\",\n      data: { ...item\n      }\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/cart/decrementincart\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"decremented\",\n          response: response.data.data.productsincart\n        }); // response.data.data.productsincart\n\n        cartdispatch({\n          type: \"SET_DATA_TO_ARRAY\",\n          payload: response.data.data.productsincart\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log({\n          message: \"already exist\"\n        });\n      }\n    } catch (error) {\n      console.log({\n        success: false,\n        errormessage: error.message\n      });\n    }\n  }\n\n  async function incrementbyone(item) {\n    console.log({\n      message: \"INCREMENT_BY_ONE\",\n      data: { ...item\n      }\n    });\n\n    try {\n      const response = await myauthAxios.post(\"/cart/incrementincart\", { ...item\n      });\n\n      if (response.status === 200) {\n        console.log({\n          message: \"incremented\",\n          response: response.data.data.productsincart\n        }); // response.data.data.productsincart\n\n        cartdispatch({\n          type: \"SET_DATA_TO_ARRAY\",\n          payload: response.data.data.productsincart\n        });\n      }\n\n      if (response.status === 400 || response.status === 401) {\n        console.log({\n          message: \"already exist\"\n        });\n      }\n    } catch (error) {\n      console.log({\n        success: false,\n        errormessage: error.message\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"This is Cart page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), loader ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loding...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-cardcontainer\",\n      children: state.map(items => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-badge\",\n              children: \"Hot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-tumb\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: items.image,\n                alt: items.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"product-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"product-catagory\",\n                children: items.foodtype\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: items.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    color: \"black\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"product-bottom-details\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"product-price\",\n                  children: [\"\\u20B9\", items.price]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"product-links\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      addtowhishlist(items); // dispatch({\n                      //   type: \"ADD_TO_WHISHLIST\",\n                      //   payload: items,\n                      // })\n                    },\n                    className: \"product-whishlist-heart\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: \"2rem\"\n                      },\n                      children: \" \\u2665 \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 240,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    // usydf removefromcart\n                    onClick: () => removefromcart(items),\n                    style: {\n                      fontSize: \"2rem\"\n                    },\n                    children: \"\\uD83D\\uDDD1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: \"2rem\"\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      // dispatch({\n                      //   type: \"DECREMENT_BY_ONE\",\n                      //   payload: items,\n                      // })\n                      decrementbyone(items);\n                    },\n                    style: {\n                      fontSize: \"1rem\",\n                      width: \"2rem\",\n                      height: \"2rem\",\n                      borderRadius: \"50%\",\n                      cursor: \"pointer\"\n                    },\n                    children: \"<\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 25\n                  }, this), \"\\xA0\", items.quantity, \"\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      // dispatch({\n                      //   type: \"INCREMENT_BY_ONE\",\n                      //   payload: items,\n                      // })\n                      incrementbyone(items);\n                    },\n                    style: {\n                      fontSize: \"1rem\",\n                      width: \"2rem\",\n                      height: \"2rem\",\n                      borderRadius: \"50%\",\n                      cursor: \"pointer\"\n                    },\n                    children: \">\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this)\n        }, items.prid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 3000,\n      hideProgressBar: false,\n      newestOnTop: false,\n      closeOnClick: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n}\n/*\r\nThe 'cartarray' array makes the dependencies of useEffect Hook (at line 48) change on every render.\r\nTo fix this, wrap the initialization of 'cartarray' in its own useMemo() Hook.\r\n*/\n\n_s(Cartpage, \"tFVAQOS4ACX/a1qNSK65DGPTp9E=\", false, function () {\n  return [useAuth, useCartcontext, useWishlistcontext];\n});\n\n_c = Cartpage;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cartpage\");","map":{"version":3,"sources":["C:/Users/Yogesh/Desktop/acomgit/ecomgit/ecommerce/src/pages/cartpage.js"],"names":["axios","useEffect","useState","useAuth","useCartcontext","useWishlistcontext","ToastContainer","toast","Cartpage","token","myauthAxios","cartdispatch","cartstate","wishlistdispatch","loader","setLoader","state","dataincart","console","log","source","CancelToken","fetchData","response","get","headers","authorization","cancelToken","type","payload","data","productsincart","error","isCancel","JSON","stringify","success","errormessage","message","cancel","removefromcart","item","post","status","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","errorresponse","addtowhishlist","update","productsinwishlist","info","decrementbyone","incrementbyone","map","items","image","name","foodtype","color","price","fontSize","width","height","borderRadius","cursor","quantity","prid"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useAuth } from \"../contexts/auth-context\";\r\nimport { useCartcontext } from \"../contexts/cart-context\";\r\nimport { useWishlistcontext } from \"../contexts/wishlist-context\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nexport function Cartpage() {\r\n  const { token, myauthAxios } = useAuth();\r\n  const { cartdispatch, cartstate } = useCartcontext();\r\n  const { wishlistdispatch } = useWishlistcontext();\r\n  const [loader, setLoader] = useState(true);\r\n  const state = [...cartstate.dataincart];\r\n  console.log({ state });\r\n  useEffect(() => {\r\n    console.log({ token });\r\n    const source = axios.CancelToken.source();\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoader(true);\r\n        const response = await axios.get(\r\n          \"https://ecom-server--bleedblue.repl.co/cart/getcartdata\",\r\n          {\r\n            headers: { authorization: token },\r\n            cancelToken: source.token,\r\n          }\r\n        );\r\n        cartdispatch({\r\n          type: \"SET_DATA_TO_ARRAY\",\r\n          payload: response.data.data.productsincart,\r\n        });\r\n        setLoader(false);\r\n        // ...\r\n      } catch (error) {\r\n        if (axios.isCancel(error)) {\r\n          setLoader(false);\r\n          //cancelled\r\n          console.log(\"axios cancel : \", JSON.stringify(axios.isCancel(error)));\r\n        } else {\r\n          // throw error;\r\n          console.log({ success: false, errormessage: error.message });\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      source.cancel();\r\n    };\r\n  }, [token, cartdispatch]);\r\n  async function removefromcart(item) {\r\n    // cartreducer({\r\n    //   type: \"REMOVE_FROM_CART\",\r\n    //   payload: response.data.data.productsincart,\r\n    // });\r\n    try {\r\n      const response = await myauthAxios.post(\"/cart/removefromcart\", {\r\n        ...item,\r\n      });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          success: true,\r\n          message: \"removed from cart\",\r\n          response: response.data.data.productsincart,\r\n        });\r\n        cartdispatch({\r\n          type: \"SET_DATA_TO_ARRAY\",\r\n          payload: response.data.data.productsincart,\r\n        });\r\n        toast.success(\"removed from cart\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n        console.log({ message: \"status 200 executed\" });\r\n      }\r\n    } catch (error) {\r\n      console.log({ errorresponse: error.response });\r\n      toast.error(\"some error occured\", {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  async function addtowhishlist(item) {\r\n    console.log({ message: \"ADD_TO_WHISHLIST\", data: { ...item } });\r\n    try {\r\n      const response = await myauthAxios.post(\"/wishlist/addtowhishlist\", {\r\n        ...item,\r\n      });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"added to whishlist\",\r\n          response: response.data.update.productsinwishlist,\r\n        });\r\n        wishlistdispatch({\r\n          type: \"SET_DATA_TO_WISHLIST_ARRAY\",\r\n          payload: response.data.update.productsinwishlist,\r\n        });\r\n        toast.success(\"added to wishlist\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log({ message: \"already exist\" });\r\n      }\r\n    } catch (error) {\r\n      if (\r\n        (error.response.data.message === \"already present in array\" &&\r\n          error.response.status) === 400\r\n      ) {\r\n        toast.info(\"product already present in wishlist\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      } else {\r\n        toast.error(\"some error occured\", {\r\n          position: \"top-right\",\r\n          autoClose: 3000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          draggable: true,\r\n          progress: undefined,\r\n        });\r\n      }\r\n    }\r\n  }\r\n  async function decrementbyone(item) {\r\n    console.log({ message: \"DECREMENT_BY_ONE\", data: { ...item } });\r\n    try {\r\n      const response = await myauthAxios.post(\"/cart/decrementincart\", {\r\n        ...item,\r\n      });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"decremented\",\r\n          response: response.data.data.productsincart,\r\n        });\r\n        // response.data.data.productsincart\r\n        cartdispatch({\r\n          type: \"SET_DATA_TO_ARRAY\",\r\n          payload: response.data.data.productsincart,\r\n        });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log({ message: \"already exist\" });\r\n      }\r\n    } catch (error) {\r\n      console.log({ success: false, errormessage: error.message });\r\n    }\r\n  }\r\n  async function incrementbyone(item) {\r\n    console.log({ message: \"INCREMENT_BY_ONE\", data: { ...item } });\r\n    try {\r\n      const response = await myauthAxios.post(\"/cart/incrementincart\", {\r\n        ...item,\r\n      });\r\n      if (response.status === 200) {\r\n        console.log({\r\n          message: \"incremented\",\r\n          response: response.data.data.productsincart,\r\n        });\r\n        // response.data.data.productsincart\r\n        cartdispatch({\r\n          type: \"SET_DATA_TO_ARRAY\",\r\n          payload: response.data.data.productsincart,\r\n        });\r\n      }\r\n      if (response.status === 400 || response.status === 401) {\r\n        console.log({ message: \"already exist\" });\r\n      }\r\n    } catch (error) {\r\n      console.log({ success: false, errormessage: error.message });\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <h1>This is Cart page</h1>\r\n      {loader ? (\r\n        <h1>Loding...</h1>\r\n      ) : (\r\n        <div className=\"product-cardcontainer\">\r\n          {state.map((items) => {\r\n            return (\r\n              <div key={items.prid}>\r\n                <div className=\"product-card\">\r\n                  <div className=\"product-badge\">Hot</div>\r\n                  <div className=\"product-tumb\">\r\n                    <img src={items.image} alt={items.name} />\r\n                  </div>\r\n                  <div className=\"product-details\">\r\n                    <span className=\"product-catagory\">{items.foodtype}</span>\r\n                    <h3>{items.name}</h3>\r\n                    <p>\r\n                      <span style={{ color: \"black\" }}>\r\n                        {/* Stock status :&nbsp;\r\n                      {items.inStock ? \"available\" : \"not available\"} <br />\r\n                      fast delivery status - &nbsp;\r\n                      {items.fastDelivery ? \"available\" : \"not available\"} */}\r\n                      </span>\r\n                    </p>\r\n                    <div className=\"product-bottom-details\">\r\n                      <div className=\"product-price\">₹{items.price}</div>\r\n                      <div className=\"product-links\">\r\n                        <button\r\n                          onClick={() => {\r\n                            addtowhishlist(items);\r\n                            // dispatch({\r\n                            //   type: \"ADD_TO_WHISHLIST\",\r\n                            //   payload: items,\r\n                            // })\r\n                          }}\r\n                          className=\"product-whishlist-heart\"\r\n                        >\r\n                          <span style={{ fontSize: \"2rem\" }}> &#9829; </span>\r\n                        </button>\r\n                        <button\r\n                          // usydf removefromcart\r\n                          onClick={() => removefromcart(items)}\r\n                          style={{ fontSize: \"2rem\" }}\r\n                        >\r\n                          &#128465;\r\n                        </button>\r\n                      </div>\r\n                      <div style={{ fontSize: \"2rem\" }}>\r\n                        <button\r\n                          onClick={() => {\r\n                            // dispatch({\r\n                            //   type: \"DECREMENT_BY_ONE\",\r\n                            //   payload: items,\r\n                            // })\r\n                            decrementbyone(items);\r\n                          }}\r\n                          style={{\r\n                            fontSize: \"1rem\",\r\n                            width: \"2rem\",\r\n                            height: \"2rem\",\r\n                            borderRadius: \"50%\",\r\n                            cursor: \"pointer\",\r\n                          }}\r\n                        >\r\n                          &lt;\r\n                        </button>\r\n                        &nbsp;\r\n                        {items.quantity}&nbsp;\r\n                        <button\r\n                          onClick={() => {\r\n                            // dispatch({\r\n                            //   type: \"INCREMENT_BY_ONE\",\r\n                            //   payload: items,\r\n                            // })\r\n                            incrementbyone(items);\r\n                          }}\r\n                          style={{\r\n                            fontSize: \"1rem\",\r\n                            width: \"2rem\",\r\n                            height: \"2rem\",\r\n                            borderRadius: \"50%\",\r\n                            cursor: \"pointer\",\r\n                          }}\r\n                        >\r\n                          &gt;\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n/*\r\nThe 'cartarray' array makes the dependencies of useEffect Hook (at line 48) change on every render.\r\nTo fix this, wrap the initialization of 'cartarray' in its own useMemo() Hook.\r\n*/\r\n"]},"metadata":{},"sourceType":"module"}